@using Nop.Core.Infrastructure;
@using Nop.Core.Domain.Localization
@using Nop.Services.Configuration

@using Nop.Services.Common;


<div class="page home-page">
    <div class="page-body">
        @Html.Widget("home_page_top")
        @Html.Action("TopicBlock", "Topic", new { systemName = "HomePageText" })
        @Html.Widget("home_page_before_categories")
        <!-- start HomepageCategories -->
        @Html.Action("HomepageCategories", "Catalog")
        <!-- end HomepageCategories -->
    </div>
</div>

    <div>
        Application path: @Request.ApplicationPath
        AppDomainApp Virtual path: @HttpRuntime.AppDomainAppVirtualPath
        @{
            var storeContext = EngineContext.Current.Resolve<Nop.Core.IStoreContext>();

            var workContext = EngineContext.Current.Resolve<Nop.Core.IWorkContext>();
            var customer = workContext.CurrentCustomer;

            if (customer != null)
            {
                @Html.Raw("CustomerGuid&nbsp;&nbsp;")  <b>@customer.CustomerGuid</b> <br />
                @Html.Raw("Username&nbsp;&nbsp;") @customer.Username                <br />
            }

            var acceptCookie = customer.GetAttribute<bool>(Nop.Core.Domain.Customers.SystemCustomerAttributeNames.EuCookieLawAccepted, storeContext.CurrentStore.Id);

            @Html.Raw("Accept cookie ? &nbsp;&nbsp;") @acceptCookie


            var settingSerivce = EngineContext.Current.Resolve<ISettingService>();
            var localizationSettings = EngineContext.Current.Resolve<LocalizationSettings>();
            localizationSettings.SeoFriendlyUrlsForLanguagesEnabled = true;

            //settingSerivce.SaveSetting<LocalizationSettings>(localizationSettings);
            @localizationSettings.SeoFriendlyUrlsForLanguagesEnabled
            var storeInfoSettings = EngineContext.Current.Resolve<Nop.Core.Domain.StoreInformationSettings>();
            storeInfoSettings.DisplayEuCookieLawWarning = true;
            settingSerivce.SaveSetting(storeInfoSettings);
            <br /> <span>DisplayEuCookieLawWarning</span>  @storeInfoSettings.DisplayEuCookieLawWarning
        }
    </div>
